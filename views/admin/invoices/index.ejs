

<section class="admin-shell">


  
  <!-- SIDEBAR (same as dashboard, DO NOT CHANGE) -->
  <aside class="admin-sidebar">

    <div class="admin-logo">
      <span class="paw">üêæ</span>
      <div>
        <strong>ImperialPaws</strong>
        <em>Admin Panel</em>
      </div>
    </div>

    <nav class="admin-menu">
      <a href="/admin/dashboard">Dashboard</a>
      <a href="/admin/applications" class="active">Applications</a>
      <a href="/admin/puppies">Puppies</a>
      <a href="/admin/testimonials">Testimonials</a>
      <a href="/admin/invoices">Invoices</a>
      <a href="/admin/settings">Site Settings</a>
      <a href="/admin/admins">Admins</a>
    </nav>

    <div class="admin-logout">
      <a href="/admin/logout">Logout</a>
    </div>

  </aside>
  <h1>Invoices</h1>

<div class="admin-table-toolbar">
  <a href="/admin/invoices/select-application" class="btn-create-invoice">
    + Create Invoice
  </a>
</div>

  <br><br>

  <% if (!invoices.length) { %>
    <p>No invoices created yet.</p>
  <% } else { %>

    <table class="admin-table">
      <thead>
        <tr>
          <th>Invoice</th>
          <th>Status</th>
          <th>Paid</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% invoices.forEach(inv => { %>
          <tr>
            <td><%= inv.invoiceNumber %></td>

            <td>
              <span class="status-badge <%= inv.paid ? 'paid' : 'pending' %>">
                <%= inv.paid ? "Paid" : "Pending" %>
              </span>
            </td>

            <td><%= inv.paid ? "Yes" : "No" %></td>

            <td>
              <%= new Date(inv.createdAt).toLocaleDateString() %>
            </td>

            <td style="white-space:nowrap">
              <a href="/admin/invoices/view/<%= inv.invoiceNumber %>">View</a>
              |
              <a href="/admin/invoices/edit/<%= inv.invoiceNumber %>">Edit</a>

              <form
                method="POST"
                action="/admin/invoices/<%= inv.invoiceNumber %>/toggle-paid"
                style="display:inline"
              >
                <button type="submit">
                  <%= inv.paid ? "Mark Unpaid" : "Mark Paid" %>
                </button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>

  <% } %>
</section>
